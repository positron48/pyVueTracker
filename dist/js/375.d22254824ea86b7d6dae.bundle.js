"use strict";(self.webpackChunktracker=self.webpackChunktracker||[]).push([[375,951],{7242:function(t,e,s){s.r(e),s.d(e,{default:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("div",[t._m(0),t._v(" "),e("TaskStop",{ref:"taskStop",on:{"stop-task":t.onStopTask}}),t._v(" "),e("TaskAdd",{ref:"taskAdd",attrs:{projects:t.userProjects,tags:t.userTags},on:{"add-task":t.onAddTask}}),t._v(" "),e("Tasks",{ref:"tasks",on:{update:function(e){return t.onEditTask()}}})],1)};r._withStripped=!0;var a=s(8683),n=s(8232),i=s(3040),o=s(2866),u={data:function(){return{timer:null,userProjects:[],userTags:[]}},methods:{refreshData:function(){this.$refs.taskStop.getCurrentTask(),this.$refs.taskAdd.getCompletitions(),this.$refs.tasks.refreshDate(),this.$refs.tasks.getTasks()},onStopTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},onAddTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},onEditTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},getUserProjects:function(){var t=this;o.n.getUserProjects().then((function(e){t.userProjects=e.data.projects})).catch((function(t){console.log(["getUserProjects error",t])}))},getUserTags:function(){var t=this;o.n.getUserTags().then((function(e){t.userTags=e.data.tags})).catch((function(t){console.log(["getUserTags error",t])}))}},components:{Tasks:a.default,TaskAdd:n.default,TaskStop:i.default},mounted:function(){this.timer=setInterval(this.refreshData,6e4),this.getUserProjects(),this.getUserTags()},destroyed:function(){clearInterval(this.timer)}},c=(0,s(4486).A)(u,r,[function(){var t=this._self._c;return t("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[t("div",{staticClass:"md-layout-item md-large-size-50 md-xlarge-size-50 md-medium-size-70 md-small-size-100"})])}],!1,null,null,null).exports},3040:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var r=function(){var t=this,e=t._self._c;return null!==t.current?e("div",[e("form",{staticClass:"md-layout md-gutter md-alignment-top-center center",attrs:{action:"",method:"post"},on:{submit:function(e){return e.preventDefault(),t.stopTask()}}},[e("md-card",{staticClass:"md-layout-item md-large-size-50 md-xlarge-size-50 md-medium-size-70 md-small-size-100"},[e("md-card-content",[e("div",{staticClass:"md-layout"},[e("md-list",{staticClass:"md-layout-item md-size-80"},[e("TaskItem",{attrs:{task:t.current}})],1),t._v(" "),e("div",{staticClass:"md-layout-item md-size-20"},[e("md-button",{staticClass:"md-primary",staticStyle:{"margin-top":"12px"},attrs:{type:"submit"}},[t._v("остановить")])],1)],1)])],1)],1)]):t._e()};r._withStripped=!0;var a=s(7304),n=s(2866),i=s(1347),o={data:function(){return{current:null}},computed:{title:function(){return null===this.currentTask?"Time Tracker":(0,i.ad)(this.current.delta)+" "+this.current.activity}},methods:{getCurrentTask:function(){var t=this;n.A.getCurrentTask().then((function(e){"status"in e.data&&e.data.status||!("status"in e.data)?(t.current=e.data,document.title=t.title):(t.current=null,document.title="Time tracker")})).catch((function(t){console.log(["getCurrentTask error",t])}))},stopTask:function(){var t=this;n.A.stopTask(this.current.id).then((function(e){t.$emit("stop-task"),t.current=null})).catch((function(t){console.log(["getCompletitions error",t])}))}},components:{TaskItem:a.default},mounted:function(){this.getCurrentTask()}},u=(0,s(4486).A)(o,r,[],!1,null,null,null).exports}}]);