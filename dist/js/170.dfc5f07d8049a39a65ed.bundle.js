"use strict";(self.webpackChunktracker=self.webpackChunktracker||[]).push([[170],{2866:function(t,e,n){n.d(e,{n:function(){return c}});var r=n(2284),o=(n(2675),n(9463),n(2010),n(6099),n(3362),n(2505)),i=n.n(o),a=n(14),u=n(1347),s=i().create({baseURL:"https://time.retailcrm.tech",headers:{"Content-type":"application/x-www-form-urlencoded"}});s.interceptors.response.use((function(t){return"object"===(0,r.A)(t.data)&&null!==t.data&&"token"in t.data&&(localStorage.setItem("token",t.data.token),delete t.data.token),t}),(function(t){return void 0!==t.response&&"status"in t.response&&401===t.response.status&&(0,a.W5)()&&((0,a.ri)(),location.reload()),Promise.reject(t)})),s.interceptors.request.use((function(t){return t.headers.token=(0,a.gf)(),t}));var c={auth:function(t,e,n){var r={login:t,password:e,action:n};return s.post("/api/auth",(0,u.u4)(r))},getTasks:function(t,e){var n=(0,u.Yq)(t),r=new Date(e.getTime());r.setDate(e.getDate()+1);var o="/api/tasks?interval="+n+"-"+(0,u.Yq)(r);return s.get(o)},getGroupedTasks:function(t,e){var n="/api/grouped_tasks?interval="+(0,u.Yq)(t)+"-"+(0,u.Yq)(e);return s.get(n)},getCurrentTask:function(){return s.get("/api/current")},getCompletitions:function(t){return t?s.get("/api/completitions?text="+t):s.get("/api/completitions")},getTrackers:function(){return s.get("/api/trackers")},getProjects:function(t){return s.get("/api/projects",{params:{projects:t}})},getUserProjects:function(){return s.get("/api/user_projects")},getUserTags:function(){return s.get("/api/user_tags")},getTrackerProjects:function(t){return s.get("/api/trackerProjects",{params:{id:t}})},getEvoUsers:function(){return s.get("/api/evoUsers")},addTask:function(t){return s.post("/api/task",(0,u.u4)({name:t}))},getToken:function(t,e,n){return s.post("/api/getToken",(0,u.u4)({id:t,login:e,password:n}))},getSettings:function(){return s.get("/api/settings")},saveSettings:function(t){return s.post("/api/settings",(0,u.u4)(t))},stopTask:function(t){return s.post("/api/task/stop",(0,u.u4)({id:t}))},resumeTask:function(t){return s.post("/api/task/resume",(0,u.u4)({id:t}))},updateTask:function(t){return s.post("/api/task/edit",(0,u.u4)({id:t.id,name:t.name,category:t.category,date:t.date,start_time:t.start_time,end_time:t.end_time,description:t.description,tags:t.tags}))},deleteTask:function(t){return s.post("/api/task/delete",(0,u.u4)({id:t}))},saveTracker:function(t){return s.post("/api/tracker",(0,u.u4)({id:t.id,title:t.title,type:t.type,api_url:t.api_url}))},linkProject:function(t,e,n){return s.post("/api/linkProject",(0,u.u4)({projectId:t,trackerId:e,trackerProjectId:null!==n?n.value:0,trackerProjectTitle:null!==n?n.label:0}))},saveEvoUser:function(t){return s.post("/api/evoUser",(0,u.u4)({id:t.value}))},deleteTracker:function(t){return s.post("/api/tracker/delete",(0,u.u4)({id:t.id}))},getTrackerTask:function(t,e){return s.get("/api/trackerTask",{params:{trackerId:t,taskId:e}})},getVersion:function(t){return s.get("/api/version?version="+t)},exportTask:function(t){return s.post("/api/task/export",(0,u.u4)(t))}};e.A=c},14:function(t,e,n){function r(){var t=localStorage.getItem("token");return null!==t&&""!==t}function o(){localStorage.removeItem("token")}function i(){return localStorage.getItem("token")}n.d(e,{W5:function(){return r},gf:function(){return i},ri:function(){return o}})},1347:function(t,e,n){function r(t){return Object.keys(t).reduce((function(e,n){return e.push(n+"="+encodeURIComponent(t[n])),e}),[]).join("&")}function o(t,e){if(null===t||""===t)return[];var n=[],r=t.split(" "),o=" ";return r.forEach((function(t,i){if(o.length>0){var a=o+" "+t;if(!(a.length>e))return i===r.length-1?void n.push(a):void(o=a);n.push(o),o=""}i!==r.length-1&&t.length<e?o=t:n.push(t)})),n}function i(t,e){return("0"+t.getDate()).slice(-2)+"."+("0"+(t.getMonth()+1)).slice(-2)+(void 0===e?"."+t.getFullYear():"")}function a(t){var e=Math.floor(t),n=Math.floor(60*(t-e));return n<10&&(n="0"+n),e+":"+n}n.d(e,{Yq:function(){return i},ad:function(){return a},u4:function(){return r},wR:function(){return o}}),n(8598),n(4782),n(9432),n(6099),n(3500)},9503:function(t,e,n){var r=n(4991),o=n.n(r),i=n(6314),a=n.n(i)()(o());a.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),e.A=a},7170:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}}),n(2762);var r=function(){var t=this,e=t._self._c;return e("div",[e("md-card",{staticClass:"md-layout-item md-size-20",staticStyle:{margin:"auto"}},[e("md-card-content",[e("md-field",[e("label",[t._v("Логин")]),t._v(" "),e("md-input",{attrs:{type:"text",required:""},nativeOn:{keydown:function(e){return t.onKeyDown.apply(null,arguments)}},model:{value:t.login,callback:function(e){t.login="string"==typeof e?e.trim():e},expression:"login"}}),t._v(" "),e("md-tooltip",{attrs:{"md-direction":"right"}},[t._v("Логин redmine")])],1),t._v(" "),e("md-field",[e("label",[t._v("Пароль")]),t._v(" "),e("md-input",{attrs:{type:"password",required:""},nativeOn:{keydown:function(e){return t.onKeyDown.apply(null,arguments)}},model:{value:t.password,callback:function(e){t.password="string"==typeof e?e.trim():e},expression:"password"}}),t._v(" "),e("md-tooltip",{attrs:{"md-direction":"right"}},[t._v("Пароль redmine")])],1),t._v(" "),e("div",{staticClass:"auth-buttons"},[e("md-button",{on:{click:function(e){return t.auth()}}},[t._v("Войти")])],1)],1)],1),t._v(" "),e("md-dialog-alert",{attrs:{"md-active":t.showAlert,"md-content":t.alertMessage,"md-confirm-text":"Ок"},on:{"update:mdActive":function(e){t.showAlert=e},"update:md-active":function(e){t.showAlert=e}}})],1)};r._withStripped=!0;var o=n(2866),i=n(14),a={data:function(){return{login:"",password:"",isLogin:!1,showAlert:!1,alertMessage:""}},computed:{},methods:{auth:function(){var t=this;o.A.auth(this.login,this.password,"login").then((function(e){"status"in e.data&&e.data.status?(t.isLogin=(0,i.W5)(),t.$emit("login")):"message"in e.data&&e.data.message?t.alert(e.data.message):t.alert("Попробуйте позже")})).catch((function(t){console.log(["auth error",t])}))},onKeyDown:function(t){13===t.keyCode&&this.auth()},alert:function(t){this.alertMessage=t,this.showAlert=!0}},mounted:function(){this.isLogin=(0,i.W5)()}},u=n(5072),s=n.n(u),c=n(9503),l=(s()(c.A,{insert:"head",singleton:!1}),c.A.locals,(0,n(4486).A)(a,r,[],!1,null,null,null).exports)},706:function(t,e,n){var r=n(350).PROPER,o=n(9039),i=n(7452);t.exports=function(t){return o((function(){return!!i[t]()||"​᠎"!=="​᠎"[t]()||r&&i[t].name!==t}))}},3802:function(t,e,n){var r=n(9504),o=n(7750),i=n(655),a=n(7452),u=r("".replace),s=RegExp("^["+a+"]+"),c=RegExp("(^|[^"+a+"])["+a+"]+$"),l=function(t){return function(e){var n=i(o(e));return 1&t&&(n=u(n,s,"")),2&t&&(n=u(n,c,"$1")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},7452:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2762:function(t,e,n){var r=n(6518),o=n(3802).trim;r({target:"String",proto:!0,forced:n(706)("trim")},{trim:function(){return o(this)}})}}]);