"use strict";(self.webpackChunktracker=self.webpackChunktracker||[]).push([[375,951],{7242:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var r=e(8683),a=e(3996),n=e(4617),i=e(2866),o={data:function(){return{timer:null,userProjects:[],userTags:[]}},methods:{refreshData:function(){this.$refs.taskStop.getCurrentTask(),this.$refs.taskAdd.getCompletitions(),this.$refs.tasks.refreshDate(),this.$refs.tasks.getTasks()},onStopTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},onAddTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},onEditTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},getUserProjects:function(){var t=this;i.n.getUserProjects().then((function(s){t.userProjects=s.data.projects})).catch((function(t){console.log(["getUserProjects error",t])}))},getUserTags:function(){var t=this;i.n.getUserTags().then((function(s){t.userTags=s.data.tags})).catch((function(t){console.log(["getUserTags error",t])}))}},components:{Tasks:r.default,TaskAdd:a.default,TaskStop:n.default},mounted:function(){this.timer=setInterval(this.refreshData,6e4),this.getUserProjects(),this.getUserTags()},destroyed:function(){clearInterval(this.timer)}},u=(0,e(4486).A)(o,(function(){var t=this,s=t._self._c;return s("div",[t._m(0),t._v(" "),s("TaskStop",{ref:"taskStop",on:{"stop-task":t.onStopTask}}),t._v(" "),s("TaskAdd",{ref:"taskAdd",attrs:{projects:t.userProjects,tags:t.userTags},on:{"add-task":t.onAddTask}}),t._v(" "),s("Tasks",{ref:"tasks",on:{update:function(s){return t.onEditTask()}}})],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[t("div",{staticClass:"md-layout-item md-large-size-50 md-xlarge-size-50 md-medium-size-70 md-small-size-100"})])}],!1,null,null,null).exports},4617:function(t,s,e){e.r(s),e.d(s,{default:function(){return o}});var r=e(7304),a=e(2866),n=e(1347),i={data:function(){return{current:null}},computed:{title:function(){return null===this.currentTask?"Time Tracker":(0,n.ad)(this.current.delta)+" "+this.current.activity}},methods:{getCurrentTask:function(){var t=this;a.A.getCurrentTask().then((function(s){"status"in s.data&&s.data.status||!("status"in s.data)?(t.current=s.data,document.title=t.title):(t.current=null,document.title="Time tracker")})).catch((function(t){console.log(["getCurrentTask error",t])}))},stopTask:function(){var t=this;a.A.stopTask(this.current.id).then((function(s){t.$emit("stop-task"),t.current=null})).catch((function(t){console.log(["getCompletitions error",t])}))}},components:{TaskItem:r.default},mounted:function(){this.getCurrentTask()}},o=(0,e(4486).A)(i,(function(){var t=this,s=t._self._c;return null!==t.current?s("div",[s("form",{staticClass:"md-layout md-gutter md-alignment-top-center center",attrs:{action:"",method:"post"},on:{submit:function(s){return s.preventDefault(),t.stopTask()}}},[s("md-card",{staticClass:"md-layout-item md-large-size-50 md-xlarge-size-50 md-medium-size-70 md-small-size-100"},[s("md-card-content",[s("div",{staticClass:"md-layout"},[s("md-list",{staticClass:"md-layout-item md-size-80"},[s("TaskItem",{attrs:{task:t.current}})],1),t._v(" "),s("div",{staticClass:"md-layout-item md-size-20"},[s("md-button",{staticClass:"md-primary",staticStyle:{"margin-top":"12px"},attrs:{type:"submit"}},[t._v("остановить")])],1)],1)])],1)],1)]):t._e()}),[],!1,null,null,null).exports}}]);