webpackJsonp([1,2,3,4,5,6,7,8],{"41YW":function(t,e){},"9YsO":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[n("div",{staticClass:"md-layout-item md-large-size-80 md-xlarge-size-80 md-medium-size-90 md-small-size-100"},[n("h2",[t._v("Добавление задач")]),t._v(" "),n("p",[t._v("\n      При добавлении задачи можно (и нужно) сразу указать название задачи и проект, если задача заведена в редмайне,\n      то первым пишется ее номер.\n      ")]),t._v(" "),n("p",[t._v("\n      Синтаксис поля ввода задачи следующий: "),n("br"),t._v(" "),n("i",[t._v("[время выполнения] [номер задачи в редмайн] краткое описания задачи [@проект][#тег][, комментарий]")])]),t._v(" "),n("p",[t._v("\n      Детальнее по полям:\n      "),n("ul",[n("li",[n("b",[t._v("время выполнения")]),t._v(" - указывается время выполнения задачи, в различных форматах:"),n("br"),t._v(" "),n("b",[n("i",[t._v("-10")])]),t._v(" работа над задачей началась 10 минут назад"),n("br"),t._v(" "),n("b",[n("i",[t._v("11:50")])]),t._v(" работа над задачей началась в 11:50"),n("br"),t._v(" "),n("b",[n("i",[t._v("11:50-12:20")])]),t._v(" работа над задачей началась в 11:50 и завершилась в 12:20\n        ")]),t._v(" "),n("li",[n("b",[t._v("номер задачи в редмайн")]),t._v(" - нужно указывать, если нужно выгружать часы по этой задаче в редмайн\n        ")]),t._v(" "),n("li",[n("b",[t._v("краткое описания задачи")]),t._v(" - краткое описание, чтобы не забыть о чем задача\n        ")]),t._v(" "),n("li",[n("b",[t._v("[@проект]")]),t._v(" - название проекта, в рамках которого делается задача. Может быть произвольным, при экспорте\n           можно будет сопоставить с трекерами вручную, если название не совпадает с названием на трекере."),n("br"),t._v('\n           Если не указать проект, будет автоматически проставлен "untitled" (без названия)\n        ')]),t._v(" "),n("li",[n("b",[t._v("#тег")]),t._v(" - поле использвется только в статистике, помечая задачи тем или иным тегом можно будет увидеть,\n           сколько по времени занимала та или иная дестельность, например, #разработка #инкубатор #обучение.\n           Тегов может быть несколько\n        ")]),t._v(" "),n("li",[n("b",[t._v(", комментарий")]),t._v(" - комментарий, описывающий конкретную часть задачи, над которой идет работа\n           в настоящее время. Будет выгружен в комментарий редмайна и evo соответственно."),n("br"),t._v("\n           Обязателен, если задача отсутствует в редмайне, но можно указать на этапе экспорта\n        ")])])]),t._v(" "),n("p",[t._v("\n        Таким образом, корректные примеры указания задач могут выглядеть слудеющим образом:"),n("br"),t._v(" "),n("ul",[n("li",[t._v("55123 таймтрекер@инкубатор #разработка, написание руководства пользователя")]),t._v(" "),n("li",[t._v("-30 поддержка столплит@столплит #поддержка, прогрузка данных по заказам из 1с")]),t._v(" "),n("li",[t._v("11:20-12:50 митап@развитие интаро")]),t._v(" "),n("li",[t._v("заполню потом")])])]),t._v(" "),n("p",[t._v('\n        Пользуясь клавишей Tab можно подставлять в строку символы "@/#/,", переключая таким образом вводимое поле.\n        Shift+Tab переключает символы в обратном порядке\n      ')]),t._v(" "),n("br"),n("br"),t._v(" "),n("h2",[t._v("Интерфейс")]),t._v(" "),n("p",[t._v("Основной интерфейс выглядит следующим образом:")]),t._v(" "),n("img",{staticClass:"center",attrs:{src:"/static/screen_main_top.png"}}),t._v(" "),n("img",{staticClass:"center",attrs:{src:"/static/screen_main_bottom.png"}}),t._v(" "),n("p",[t._v("\n      По блокам сверху вниз:\n      "),n("ul",[n("li",[t._v("текущая задача")]),t._v(" "),n("li",[t._v("поле ввода новой задачи")]),t._v(" "),n("li",[t._v("\n          график распределения задач по часам. По оси Х сутки, разбитые по часам, по оси Y количество времени,\n          затраченное в конкретный час. Например 16 это время с 16:00 до 17:00, потрачено полчаса\n        ")]),t._v(" "),n("li",[t._v("список задач за текущий день")]),t._v(" "),n("li",[t._v("диаграмма распределения часов по задачам")]),t._v(" "),n("li",[t._v("диаграмма распределения часов по проектам")]),t._v(" "),n("li",[t._v("диаграмма распределения часов по тегам")])])]),t._v(" "),n("br"),n("br"),t._v(" "),n("h2",[t._v("Настройки")]),t._v(" "),n("p",[t._v("Для работы выгрузки часов в внешние трекеры вам нужно авторизоваться на этих трекерах.")]),t._v(" "),n("p",[t._v('\n        Чтобы авторизоваться, перейдите в меню "Настройки", нажмите на ссылку "Получить токен", введите свой логин и\n        пароль от соответствующего трекера и кликните по кнопке "Сохранить". В итоге в табличке отобразится ваш токен.\n      ')]),t._v(" "),n("p",[t._v('\n        Для evo требуется также указать сотрудника, которому будут проставляться выгружаемые часы.\n        Нужно кликнуть на ссылку "Указать пользователя" и выбрать себя из списка.\n      ')]),t._v(" "),n("img",{staticClass:"center",attrs:{src:"/static/screen_settings.png"}}),t._v(" "),n("p",[t._v("На этой же странице можно добавить еще один трекер, если для вашей работы необходимо проставлять часы в нескольких")]),t._v(" "),n("p",{staticStyle:{"font-color":"gray"}},[t._v("\n        *логин и пароль используются исключительно для получения токена авторизации и не хранятся на сервере.\n      ")]),t._v(" "),n("br"),n("br"),t._v(" "),n("h2",[t._v("Экспорт задач")]),t._v(" "),n("p",[t._v("Для выгрузки задач нужно перейти в раздел экспорт, где отобразятся сгруппированные задачи за день.")]),n("p"),n("p",[t._v("У всех элементов интерфейса, которые требуют пояснения, при наведении появляется подсказка.")]),t._v(" "),n("p",[t._v("\n      У каждой задачи в крайнем правом столбце есть список трекеров, привязанных к задаче.\n      Цвет отражает статус трекера:\n      "),n("ul",[n("li",[t._v("\n          синий - задача готова к выгрузке на указанный трекер, при наведении отображается название проекта на трекере\n        ")]),t._v(" "),n("li",[t._v("\n          серый - не найдено соответствие проекта, нужно указать вручную, если нужно выгрузить часы на этот трекер\n           (указывается 1 раз для проекта)\n         ")]),t._v(" "),n("li",[t._v("\n          красный - задача сопоставлена, но по какой-то причине не может быть выгружена\n          (не получен токен авторизации в настройках, не указан номер задачи для редмайн, задача с таким номером\n          не существует или для ее просмотра недостаточно прав)\n         ")]),t._v(" "),n("li",[t._v("\n          желтый - задача готова к выгрузке на указанный трекер, но по ней есть предупреждение (проект задачи не\n          совпадает с сопоставленным, так бывает, когда в редмайне один проект разбит на несколько, а в эво один)\n        ")]),t._v(" "),n("li",[t._v("\n          зеленый - задача успешно выгружена на трекер\n        ")]),t._v(" "),n("li",[t._v("\n          черный - при выгрузке на трекер произошла ошибка\n        ")])])]),t._v(" "),n("p",[t._v("\n        Непосредственно на этапе экспорта можно отредактировать все данные по задачам\n        (дату, номер задачи, комментарий, часы), такие изменения повлияют только на выгрузку часов и нигде не будут учтены.\n      ")]),t._v(" "),n("p",[t._v("\n        Галочкой можно отметить, нужно ли выгружать задачу на тот или иной трекер.\n      ")]),t._v(" "),n("img",{staticClass:"center",attrs:{src:"/static/screen_export.png"}})])])])}]};var a=n("VU/8")({data:function(){return{}}},s,!1,function(t){n("41YW")},null,null);e.default=a.exports},"J+R/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("VTQS"),a=n("WdI8"),r={data:function(){return{login:"",password:"",isLogin:!1,showAlert:!1,alertMessage:""}},computed:{},methods:{auth:function(){var t=this;s.b.auth(this.login,this.password,"login").then(function(e){"status"in e.data&&e.data.status?(t.isLogin=Object(a.b)(),t.$emit("login")):"message"in e.data&&e.data.message?t.alert(e.data.message):t.alert("Попробуйте позже")}).catch(function(t){console.log(["auth error",t])})},onKeyDown:function(t){13===t.keyCode&&this.auth()},alert:function(t){this.alertMessage=t,this.showAlert=!0}},mounted:function(){this.isLogin=Object(a.b)()}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("md-card",{staticClass:"md-layout-item md-size-20",staticStyle:{margin:"auto"}},[n("md-card-content",[n("md-field",[n("label",[t._v("Логин")]),t._v(" "),n("md-input",{attrs:{type:"text",required:""},nativeOn:{keydown:function(e){return t.onKeyDown(e)}},model:{value:t.login,callback:function(e){t.login="string"==typeof e?e.trim():e},expression:"login"}}),t._v(" "),n("md-tooltip",{attrs:{"md-direction":"right"}},[t._v("Логин redmine")])],1),t._v(" "),n("md-field",[n("label",[t._v("Пароль")]),t._v(" "),n("md-input",{attrs:{type:"password",required:""},nativeOn:{keydown:function(e){return t.onKeyDown(e)}},model:{value:t.password,callback:function(e){t.password="string"==typeof e?e.trim():e},expression:"password"}}),t._v(" "),n("md-tooltip",{attrs:{"md-direction":"right"}},[t._v("Пароль redmine")])],1),t._v(" "),n("div",{staticClass:"auth-buttons"},[n("md-button",{on:{click:function(e){t.auth()}}},[t._v("Войти")])],1)],1)],1),t._v(" "),n("md-dialog-alert",{attrs:{"md-active":t.showAlert,"md-content":t.alertMessage,"md-confirm-text":"Ок"},on:{"update:mdActive":function(e){t.showAlert=e}}})],1)},staticRenderFns:[]};var o=n("VU/8")(r,i,!1,function(t){n("updD")},null,null);e.default=o.exports},"K+db":function(t,e){},QzTz:function(t,e){},YcJa:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("md-empty-state",{attrs:{"md-label":"404 - Страница не найдена","md-description":""}})],1)},staticRenderFns:[]},a=n("VU/8")(null,s,!1,null,null,null);e.default=a.exports},iWMn:function(t,e){},lO7g:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("N1EC"),a=n("KYvs"),r=n("Ty68"),i=n("VTQS"),o={data:function(){return{timer:null,userProjects:[],userTags:[]}},methods:{refreshData:function(){this.$refs.taskStop.getCurrentTask(),this.$refs.taskAdd.getCompletitions(),this.$refs.tasks.refreshDate(),this.$refs.tasks.getTasks()},onStopTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},onAddTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},onEditTask:function(){this.refreshData(),this.getUserProjects(),this.getUserTags()},getUserProjects:function(){var t=this;i.a.getUserProjects().then(function(e){t.userProjects=e.data.projects}).catch(function(t){console.log(["getUserProjects error",t])})},getUserTags:function(){var t=this;i.a.getUserTags().then(function(e){t.userTags=e.data.tags}).catch(function(t){console.log(["getUserTags error",t])})}},components:{Tasks:s.default,TaskAdd:a.default,TaskStop:r.default},mounted:function(){this.timer=setInterval(this.refreshData,6e4),this.getUserProjects(),this.getUserTags()},destroyed:function(){clearInterval(this.timer)}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("TaskStop",{ref:"taskStop",on:{"stop-task":t.onStopTask}}),t._v(" "),n("TaskAdd",{ref:"taskAdd",attrs:{projects:t.userProjects,tags:t.userTags},on:{"add-task":t.onAddTask}}),t._v(" "),n("Tasks",{ref:"tasks",on:{update:function(e){t.onEditTask()}}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[e("div",{staticClass:"md-layout-item md-large-size-50 md-xlarge-size-50 md-medium-size-70 md-small-size-100"})])}]},l=n("VU/8")(o,c,!1,null,null,null);e.default=l.exports},niH5:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("VTQS"),a={data:function(){return{trackers:[],evoUsers:[],evoUser:"",projects:null,loginToken:"",passwordToken:"",currentTracker:{id:0,title:"",api_url:"",type:"redmine"},showTracker:!1,showUser:!1,showToken:!1,showAlert:!1,alertMessage:"",userSettings:{evo_in_name:"#redmine_name",evo_in_comment:"##redmine_id",evo_out_name:"#comments",evo_out_comment:""}}},methods:{getTrackers:function(){var t=this;s.b.getTrackers().then(function(e){t.trackers=e.data.trackers}).catch(function(t){console.log(["getTasks error",t])})},getEvoUsers:function(){var t=this;s.b.getEvoUsers().then(function(e){t.evoUsers=e.data.users}).catch(function(t){console.log(["getEvoUsers error",t])})},showTrackerModal:function(){this.showTracker=!0},closeTrackerModal:function(){this.showTracker=!1},deleteTracker:function(t){var e=this;confirm("вы действительно хотите удалить трекер из списка?")&&s.b.deleteTracker(this.currentTracker).then(function(t){e.getTrackers(),e.showTracker=!1}).catch(function(t){console.log(["getToken error",t])})},saveTracker:function(){var t=this;s.b.saveTracker(this.currentTracker).then(function(e){t.getTrackers(),t.showTracker=!1}).catch(function(t){console.log(["getToken error",t])})},saveEvoUser:function(){var t=this;s.b.saveEvoUser(this.evoUser).then(function(e){t.getTrackers(),t.showUser=!1}).catch(function(t){console.log(["saveTrackerUser error",t])})},addTracker:function(){this.currentTracker={id:0,title:"",api_url:"",type:"redmine"},this.showTrackerModal()},editTracker:function(t){this.currentTracker=t,this.showTrackerModal()},getSettings:function(){var t=this;s.b.getSettings().then(function(e){for(var n in e.data.data)t.userSettings[n]=e.data.data[n]}).catch(function(t){console.log(["getSettings error",t])})},saveSettings:function(){var t=this;if(""===this.userSettings.evo_in_name.trim()||""===this.userSettings.evo_out_name.trim())return this.alert('<span style="color: red;">Формулировка обязательна!</span>'),!1;s.b.saveSettings(this.userSettings).then(function(e){t.alert("Изменения сохранены!")}).catch(function(e){console.log(["saveSettings error",e]),t.alert("Ошибка:"+e)})},restoreSettings:function(){this.userSettings={evo_in_name:"#redmine_name",evo_in_comment:"##redmine_id",evo_out_name:"#comments",evo_out_comment:""}},showTokenModal:function(t){this.loginToken="",this.passwordToken="",this.currentTracker=t,this.showToken=!0},showUserModal:function(t){"evo"===t.type&&(this.currentTracker=t,this.showUser=!0)},closeTokenModal:function(){this.showToken=!1},closeUserModal:function(){this.showUser=!1},getToken:function(){var t=this;s.b.getToken(this.currentTracker.id,this.loginToken,this.passwordToken).then(function(e){void 0!==e.data.external_token&&null!==e.data.external_token?(t.getTrackers(),"evo"===t.currentTracker.type&&t.getEvoUsers(),t.showToken=!1):t.alert("Токен не получен")}).catch(function(t){console.log(["getToken error",t])})},alert:function(t){this.alertMessage=t,this.showAlert=!0}},components:{Modal:n("/o5o").default},mounted:function(){this.getTrackers(),this.getEvoUsers(),this.getSettings()}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[n("div",{staticClass:"md-layout-item md-size-80"},[n("md-list",[n("md-list-item",[n("h3",[t._v("Трекеры")])]),t._v(" "),n("md-table",[n("md-table-row",[n("md-table-head"),t._v(" "),n("md-table-head",[t._v("Название")]),t._v(" "),n("md-table-head",[t._v("Url")]),t._v(" "),n("md-table-head",[t._v("Тип")]),t._v(" "),n("md-table-head",[t._v("Токен")]),t._v(" "),n("md-table-head",[t._v("Пользователь")])],1),t._v(" "),t._l(t.trackers,function(e){return n("md-table-row",{key:e.id},[n("md-table-head",[n("div",{staticClass:"edit-icon",on:{click:function(n){t.editTracker(e)}}},[n("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" "),n("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("Редактировать")])],1)]),t._v(" "),n("md-table-head",[t._v(t._s(e.title))]),t._v(" "),n("md-table-head",[t._v(t._s(e.api_url))]),t._v(" "),n("md-table-head",[t._v(t._s(e.type))]),t._v(" "),n("md-table-head",[n("a",{staticClass:"simple-link",on:{click:function(n){t.showTokenModal(e)}}},[n("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("Авторизация на трекере")]),t._v(" "),e.external_api_key?n("span",[t._v(t._s(e.external_api_key))]):t._e(),t._v(" "),e.external_api_key?t._e():n("span",[t._v("Получить токен")])],1)]),t._v(" "),n("md-table-head",[e.external_api_key&&"evo"===e.type?n("a",{staticClass:"simple-link",on:{click:function(n){t.showUserModal(e)}}},[e.external_user_id||"evo"!==e.type?t._e():n("span",[t._v("Указать пользователя")]),t._v(" "),e.external_user_id?n("span",[t._v(t._s(e.external_user_id))]):t._e()]):t._e(),t._v(" "),e.external_user_id&&"redmine"===e.type?n("span",[t._v(t._s(e.external_user_id))]):t._e()])],1)})],2),t._v(" "),n("md-list-item",[n("md-button",{on:{click:function(e){t.addTracker()}}},[t._v("Добавить redmine")])],1)],1)],1),t._v(" "),n("br"),n("br"),t._v(" "),t.projects?n("div",{staticClass:"md-layout-item md-size-80"},[n("md-list",[n("md-list-item",[t._v("\n          Проекты\n        ")]),t._v(" "),n("md-table",[n("md-table-row",[n("md-table-head"),t._v(" "),n("md-table-head",[t._v("Название")]),t._v(" "),n("md-table-head",[t._v("Url")]),t._v(" "),n("md-table-head",[t._v("Тип")]),t._v(" "),n("md-table-head",[t._v("Токен")])],1),t._v(" "),t._l(t.projects,function(e){return n("md-table-row",{key:e.id},[n("md-table-head",[n("div",{on:{click:function(n){t.editProject(e.id)}}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1)]),t._v(" "),n("md-table-head",[t._v(t._s(e.title))]),t._v(" "),n("md-table-head",[t._v(t._s(e.api_url))]),t._v(" "),n("md-table-head",[t._v(t._s(e.type))]),t._v(" "),n("md-table-head",[t._v(t._s(e.external_api_key))])],1)})],2),t._v(" "),n("md-list-item",[n("md-button",[t._v("Добавить")])],1)],1)],1):t._e()]),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[n("div",{staticClass:"md-layout-item md-size-80"},[n("md-list",[n("md-list-item",[n("h3",[t._v("Формат выгрузки часов в evolution")])]),t._v(" "),n("md-list-item",[n("b",[t._v("Есть задача в redmine")]),t._v(" "),n("md-field",[n("label",[t._v("формулировка")]),t._v(" "),n("md-input",{attrs:{required:""},model:{value:t.userSettings.evo_in_name,callback:function(e){t.$set(t.userSettings,"evo_in_name",e)},expression:"userSettings.evo_in_name"}})],1),t._v(" "),n("md-field",[n("label",[t._v("комментарий")]),t._v(" "),n("md-input",{model:{value:t.userSettings.evo_in_comment,callback:function(e){t.$set(t.userSettings,"evo_in_comment",e)},expression:"userSettings.evo_in_comment"}})],1)],1),t._v(" "),n("md-list-item",[n("b",[t._v("Нет задачи в redmine")]),t._v(" "),n("md-field",[n("label",[t._v("формулировка")]),t._v(" "),n("md-input",{attrs:{required:""},model:{value:t.userSettings.evo_out_name,callback:function(e){t.$set(t.userSettings,"evo_out_name",e)},expression:"userSettings.evo_out_name"}})],1),t._v(" "),n("md-field",[n("label",[t._v("комментарий")]),t._v(" "),n("md-input",{model:{value:t.userSettings.evo_out_comment,callback:function(e){t.$set(t.userSettings,"evo_out_comment",e)},expression:"userSettings.evo_out_comment"}})],1)],1),t._v(" "),n("md-list-item",[n("b",[t._v("Допустимые подстановки:")]),n("br"),t._v(" "),n("br"),n("i",[t._v("#redmine_name")]),t._v(" - название задачи из редмайн\n          "),n("br"),n("i",[t._v("#redmine_id")]),t._v(" - номер задачи из редмайн\n          "),n("br"),n("i",[t._v("#name")]),t._v(" - название задачи из трекера\n          "),n("br"),n("i",[t._v("#comments")]),t._v(" - комментарии к задаче из трекера\n        ")]),t._v(" "),n("md-list-item",[n("md-button",{staticClass:"md-accent",on:{click:function(e){t.saveSettings()}}},[t._v("Сохранить")]),t._v(" "),n("md-button",{on:{click:function(e){t.restoreSettings()}}},[t._v("По умолчанию")])],1)],1)],1)]),t._v(" "),n("modal",{attrs:{show:t.showTracker},on:{close:t.closeTrackerModal}},[n("div",{staticClass:"modal-header"}),t._v(" "),n("div",{staticClass:"modal-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTracker.id,expression:"currentTracker.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.currentTracker.id},on:{input:function(e){e.target.composing||t.$set(t.currentTracker,"id",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTracker.type,expression:"currentTracker.type"}],attrs:{type:"hidden",name:"type"},domProps:{value:t.currentTracker.type},on:{input:function(e){e.target.composing||t.$set(t.currentTracker,"type",e.target.value)}}}),t._v(" "),n("md-field",[n("label",[t._v("Название")]),t._v(" "),n("md-input",{model:{value:t.currentTracker.title,callback:function(e){t.$set(t.currentTracker,"title",e)},expression:"currentTracker.title"}})],1),t._v(" "),n("md-field",[n("label",[t._v("Url")]),t._v(" "),n("md-input",{model:{value:t.currentTracker.api_url,callback:function(e){t.$set(t.currentTracker,"api_url",e)},expression:"currentTracker.api_url"}})],1)],1),t._v(" "),n("div",{staticClass:"modal-footer text-right"},[n("md-button",{staticClass:"md-primary",on:{click:t.deleteTracker}},[t._v("удалить")]),t._v(" "),n("md-button",{staticClass:"md-primary",on:{click:t.closeTrackerModal}},[t._v("отмена")]),t._v(" "),n("md-button",{staticClass:"md-accent",on:{click:t.saveTracker}},[t._v("сохранить")])],1)]),t._v(" "),n("modal",{attrs:{show:t.showToken},on:{close:t.closeTokenModal}},[n("div",{staticClass:"modal-header"},[n("h2",[t._v("Данные для авторизации в "+t._s(t.currentTracker.title))])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTracker.id,expression:"currentTracker.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.currentTracker.id},on:{input:function(e){e.target.composing||t.$set(t.currentTracker,"id",e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTracker.type,expression:"currentTracker.type"}],attrs:{type:"hidden",name:"type"},domProps:{value:t.currentTracker.type},on:{input:function(e){e.target.composing||t.$set(t.currentTracker,"type",e.target.value)}}}),t._v(" "),n("md-field",[n("label",[t._v("Логин")]),t._v(" "),n("md-input",{model:{value:t.loginToken,callback:function(e){t.loginToken=e},expression:"loginToken"}})],1),t._v(" "),n("md-field",[n("label",[t._v("Пароль")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.passwordToken,callback:function(e){t.passwordToken=e},expression:"passwordToken"}})],1)],1),t._v(" "),n("div",{staticClass:"modal-footer text-right"},[n("md-button",{staticClass:"md-primary",on:{click:t.closeTokenModal}},[t._v("отмена")]),t._v(" "),n("md-button",{staticClass:"md-accent",on:{click:t.getToken}},[t._v("получить")])],1)]),t._v(" "),n("modal",{attrs:{show:t.showUser}},[n("div",{staticClass:"modal-header"},[n("h2",[t._v("Выберите пользователя в "+t._s(t.currentTracker.title))])]),t._v(" "),n("div",{staticClass:"modal-body"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.currentTracker.id,expression:"currentTracker.id"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.currentTracker.id},on:{input:function(e){e.target.composing||t.$set(t.currentTracker,"id",e.target.value)}}}),t._v(" "),n("v-select",{attrs:{options:t.evoUsers},model:{value:t.evoUser,callback:function(e){t.evoUser=e},expression:"evoUser"}})],1),t._v(" "),n("div",{staticClass:"modal-footer text-right"},[n("md-button",{staticClass:"md-primary",on:{click:t.closeUserModal}},[t._v("отмена")]),t._v(" "),n("md-button",{staticClass:"md-accent",on:{click:t.saveEvoUser}},[t._v("сохранить")])],1)]),t._v(" "),n("md-dialog-alert",{attrs:{"md-active":t.showAlert,"md-content":t.alertMessage,"md-confirm-text":"Ок"},on:{"update:mdActive":function(e){t.showAlert=e}}})],1)},staticRenderFns:[]};var i=n("VU/8")(a,r,!1,function(t){n("iWMn")},"data-v-0019876c",null);e.default=i.exports},q3Hp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Ppbp"),a=n.n(s),r=n("rrOh"),i={data:function(){return{selectedDate:{start:new Date,end:new Date},time:[new Date,new Date],shortcuts:[{text:"сегодня",start:new Date,end:new Date},{text:"вчера",start:new Date((new Date).setDate((new Date).getDate()-1)),end:new Date((new Date).setDate((new Date).getDate()-1))},{text:"эта неделя",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+1)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+7))},{text:"прошлая",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)-6)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)))}]}},methods:{onDateSelected:function(t){2===t.length&&null!==t[0]&&null!==t[1]&&(this.selectedDate.start=t[0],this.selectedDate.end=t[1],this.$refs.grouped_tasks.selectedDate=this.selectedDate,this.refreshData())},refreshData:function(){this.$refs.grouped_tasks.getTasks()}},components:{DatePicker:a.a,ExportTasks:r.default},mounted:function(){this.$refs.rangeDatePicker.dateRange=this.selectedDate}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[n("div",{staticClass:"md-layout-item md-size-50"},[n("date-picker",{ref:"rangeDatePicker",attrs:{"first-day-of-week":1,confirm:"",lang:"ru",range:"",format:"DD.MM.YYYY",shortcuts:t.shortcuts},on:{change:t.onDateSelected},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)]),t._v(" "),n("ExportTasks",{ref:"grouped_tasks",attrs:{initialDate:t.selectedDate},on:{update:function(e){t.refreshData()}}})],1)},staticRenderFns:[]},c=n("VU/8")(i,o,!1,null,null,null);e.default=c.exports},"s6+2":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("lO7g"),a=n("yZHR"),r=n("J+R/"),i=n("q3Hp"),o=n("niH5"),c=n("9YsO"),l=n("YcJa"),d=n("WdI8"),u=n("VTQS"),v={data:function(){return{currentComponent:null,loginText:"Выйти",isLogin:!1,version:null,timer:null,dialog:{show:!1,title:"Доступна новая версия!",content:""}}},components:{Home:s.default,History:a.default,Auth:r.default,Export:i.default,Settings:o.default,Help:c.default,NotFound:l.default},methods:{updateLogin:function(){this.isLogin=Object(d.b)(),this.loginText=this.isLogin?"Выйти":"Войти";var t=location.pathname.substr(1);t=t.charAt(0).toUpperCase()+t.slice(1),this.isLogin?"Auth"===t||""===t?this.go("Home"):-1!==["Home","History","Export","Help","Settings"].indexOf(t)?this.go(t):this.go("NotFound"):"Help"===t?this.go(t):this.go("Auth")},getVersion:function(){var t=this;u.b.getVersion(this.version).then(function(e){null===t.version?t.version=e.data.version:t.version<parseFloat(e.data.version)&&(t.dialog.content="Изменения:<br>"+e.data.changes.join("<br>")+"<br><br>Обновить страницу?",t.dialog.show=!0)}).catch(function(t){console.log(["getVersion error",t])})},go:function(t){t!==this.currentComponent&&(-1!==["Auth","Help"].indexOf(t)?("Auth"===t&&this.isLogin&&(Object(d.c)(),this.isLogin=Object(d.b)(),this.loginText=this.isLogin?"Выйти":"Войти"),this.currentComponent=t,this.changeUrl(t)):this.isLogin?(this.currentComponent=t,this.changeUrl(t)):this.updateLogin())},changeUrl:function(t){window.history.replaceState?window.history.replaceState(t,t,"/"+t.toLowerCase()):window.history.pushState(t,t,"/"+t.toLowerCase())},onConfirm:function(){location.reload(!0)},onCancel:function(){this.dialog.show=!1}},mounted:function(){this.updateLogin(),this.getVersion(),this.timer=setInterval(this.getVersion,3e5)}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("nav",[n("div",{staticClass:"md-toolbar md-accent md-theme-demo-light md-elevation-1"},[n("div",{staticClass:"md-title main-title"},[n("a",{on:{click:function(e){t.go("Home")}}},[t._v("Time tracker")])]),t._v(" "),n("button",{staticClass:"md-button md-theme-demo-light short",attrs:{type:"button"},on:{click:function(e){t.go("Help")}}},[n("font-awesome-icon",{class:"Help"==t.currentComponent?"current":"",attrs:{icon:"question-circle"}})],1),t._v(" "),t.isLogin?n("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"},on:{click:function(e){t.go("Home")}}},[n("div",{staticClass:"md-ripple"},[n("div",{staticClass:"md-button-content",class:"Home"==t.currentComponent?"current":""},[t._v("Главный экран")])])]):t._e(),t._v(" "),t.isLogin?n("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"},on:{click:function(e){t.go("History")}}},[n("div",{staticClass:"md-ripple"},[n("div",{staticClass:"md-button-content",class:"History"==t.currentComponent?"current":""},[t._v("История")])])]):t._e(),t._v(" "),t.isLogin?n("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"},on:{click:function(e){t.go("Export")}}},[n("div",{staticClass:"md-ripple"},[n("div",{staticClass:"md-button-content",class:"Export"==t.currentComponent?"current":""},[t._v("Экспорт")])])]):t._e(),t._v(" "),t.isLogin?n("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"},on:{click:function(e){t.go("Settings")}}},[n("div",{staticClass:"md-ripple"},[n("div",{staticClass:"md-button-content",class:"Settings"==t.currentComponent?"current":""},[t._v("Настройки")])])]):t._e(),t._v(" "),n("button",{staticClass:"md-button md-theme-demo-light",attrs:{type:"button"},on:{click:function(e){t.go("Auth")}}},[n("div",{staticClass:"md-ripple"},[n("div",{staticClass:"md-button-content",class:"Auth"==t.currentComponent?"current":""},[t._v(t._s(t.loginText))])])])])]),t._v(" "),n("div",{staticClass:"container",attrs:{id:"main"}},[n(t.currentComponent,{tag:"component",on:{login:t.updateLogin}})],1),t._v(" "),n("md-dialog-confirm",{attrs:{"md-active":t.dialog.show,"md-title":t.dialog.title,"md-content":t.dialog.content,"md-confirm-text":"Да","md-cancel-text":"Обновлю позже"},on:{"update:mdActive":function(e){t.$set(t.dialog,"show",e)},"md-cancel":t.onCancel,"md-confirm":t.onConfirm}})],1)},staticRenderFns:[]};var _=n("VU/8")(v,m,!1,function(t){n("K+db")},null,null);e.default=_.exports},updD:function(t,e){},yZHR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Ppbp"),a=n.n(s),r=n("N1EC"),i={data:function(){return{selectedDate:{start:new Date,end:new Date},time:[new Date,new Date],shortcuts:[{text:"сегодня",start:new Date,end:new Date},{text:"вчера",start:new Date((new Date).setDate((new Date).getDate()-1)),end:new Date((new Date).setDate((new Date).getDate()-1))},{text:"эта неделя",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+1)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)+7))},{text:"прошлая",start:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)-6)),end:new Date((new Date).setDate((new Date).getDate()-((new Date).getDay()||7)))},{text:"месяц",start:new Date((new Date).setDate(1)),end:new Date(new Date(new Date((new Date).setDate(1)).setMonth((new Date).getMonth()+1)).setDate(0))},{text:"прошлый",start:new Date(new Date((new Date).setDate(1)).setMonth((new Date).getMonth()-1)),end:new Date(new Date((new Date).setDate(1)).setDate(0))}]}},methods:{onDateSelected:function(t){2===t.length&&null!==t[0]&&null!==t[1]&&(this.selectedDate.start=t[0],this.selectedDate.end=t[1],this.$refs.tasks.selectedDate=this.selectedDate,this.$refs.tasks.getTasks())},refreshData:function(){this.$refs.tasks.getTasks()}},components:{DatePicker:a.a,Tasks:r.default},mounted:function(){this.$refs.rangeDatePicker.dateRange=this.selectedDate}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"md-layout md-gutter md-alignment-top-center center"},[n("div",{staticClass:"md-layout-item md-size-50"},[n("date-picker",{ref:"rangeDatePicker",attrs:{"first-day-of-week":1,confirm:"",lang:"ru",range:"",format:"DD.MM.YYYY",shortcuts:t.shortcuts},on:{change:t.onDateSelected},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),n("div",{staticClass:"refresh-button",on:{click:t.refreshData}},[n("font-awesome-icon",{attrs:{icon:"sync"}}),t._v(" "),n("md-tooltip",{attrs:{"md-direction":"top"}},[t._v("Обновить")])],1)],1)]),t._v(" "),n("Tasks",{ref:"tasks",attrs:{initialDate:t.selectedDate},on:{update:function(e){t.refreshData()}}})],1)},staticRenderFns:[]};var c=n("VU/8")(i,o,!1,function(t){n("QzTz")},null,null);e.default=c.exports}});
//# sourceMappingURL=1.964ac41f865ee982ac6d.js.map